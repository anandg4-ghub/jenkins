apiVersion: v1
kind: ConfigMap
metadata:
  name: hello-app-source
  labels:
    app: hello-app
data:
  package.json: |
    {
      "name": "hello-app",
      "version": "1.0.0",
      "description": "Simple Node.js app for Jenkins K8s demo",
      "main": "server.js",
      "scripts": {
        "start": "node server.js",
        "test": "node test.js"
      },
      "dependencies": {
        "express": "^4.18.2"
      },
      "devDependencies": {}
    }
  
  server.js: |
    const express = require('express');
    const app = express();
    const PORT = process.env.PORT || 3000;

    app.get('/', (req, res) => {
      res.json({
        message: 'Hello from Jenkins K8s Demo!',
        version: '1.0.0',
        timestamp: new Date().toISOString()
      });
    });

    app.get('/health', (req, res) => {
      res.json({ status: 'healthy' });
    });

    app.listen(PORT, () => {
      console.log(`Server is running on port ${PORT}`);
    });
